{% extends "base.html" %}
{% block content %}

<!-- flash messages -->
<section>
  <div class="container">
      <div class="row">
          <div class="col-sm-12 flash-container">
              {% with messages = get_flashed_messages() %}
                  {% if messages %}
                     {% for message in messages %}
                        <div class="message-row">
                            {{ message }}
                        </div>
                     {% endfor %}
                  {% endif %} 
              {% endwith %}
          </div>
      </div>
  </div>
</section>

  <section>
    <!-- heading -->
    <div class="container">
        <div class="row">
            <div class="col-sm-12 glossary-heading">
                <h1> Glossary </h1>
                <p> Search for a word below:</p>
            </div>
        </div>
    </div>

<!-- search box -->
<div class="container">
  <div class="row">
    <div class="col-10">
      <form action="{{ url_for('glossary') }}" method="GET" class="search-box">
        <div class="form-row">
          <div class="form-group">
            <label for="query">Search</label>
            <input type=text" name="query" class="form-control form-box" id="query" placeholder="Word or definition">
            <button type="submit" class="btn btn-info btn-search"><i class="fas fa-search"></i></button>
            <a href="{{ url_for('glossary') }}" class="btn btn-info"> Reset</a>
          </div>
    </div>
    </div>
  </div>

  
<!-- start of glossary -->
<div class="container">
  <div class="glossary-card">
        {% for definition in definitions %}
        <h5 class="card-header">
            {{ definition.definition_name }}</h5>
          <div class="card-body">
            <h5 class="card-title">
                <em>
                  Definition:
                </em>
                {{ definition.definition_description }}
            </h5>
            <p class="card-text">
              <em>
                Category:
              </em>
              {{ definition.category_name }}
            </p>
            <p class="card-text">
              <em>
                Example:
              </em>
              {{ definition.definition_example }}
            </p>
            {% if session.user|lower == definition.created_by|lower %}
                <a href="{{ url_for('edit_definition', definition_id=definition._id) }}" class="btn btn-info btn-edit">Edit</a>
                <a href="{{ url_for('delete_definition', definition_id=definition._id) }}" class="btn btn-info btn-delete">Delete</a>
            {% endif %}
          </div>
        {% endfor %}
  </div>
</div>

<!-- end of page info -->
<div class="container">
  <div class="row">
    <div class="col-sm-12 end-info">
      <p> Want to add a definition or phrase of your own? <br>
        Click to 
      <a href="{{ url_for('login') }}" class="btn btn-custom">Login</a> or
      <a href="{{ url_for('register') }}" class="btn btn-custom">Register</a>! </p>
    </div>
  </div>
</div>
</section>
{% endblock %}